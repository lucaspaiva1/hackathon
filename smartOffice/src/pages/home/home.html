<ion-header>
  <ion-navbar>
    <ion-title>
      Smart Office
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <div *ngFor="let valorAtual of valor | async">
    <ion-list>
      <ion-grid>
        <ion-row>
          <ion-col col-10>
            <h5> Lâmpada </h5>
          </ion-col>
          <ion-col *ngIf="!valorAtual.lamp" col-2>
            <button ion-button color="secondary" (click)="lampada(valorAtual.lamp)">On</button>
          </ion-col>
          <ion-col *ngIf="valorAtual.lamp" col-2>
            <button ion-button color="danger" (click)="lampada(valorAtual.lamp)">off</button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-list>

    <ion-list>
      <h2> Ar-Condicionado - {{temp}}º </h2>
      <ion-grid>
        <ion-row>
          <ion-col col-10>
            <h5> Automático </h5>
          </ion-col>
          <ion-col *ngIf="!valorAtual.ar" col-2>
            <button ion-button color="secondary" (click)="ligarAr(valorAtual.ar)">On</button>
          </ion-col>
          <ion-col *ngIf="valorAtual.ar" col-2>
            <button ion-button color="danger" (click)="ligarAr(valorAtual.ar)">off</button>
          </ion-col>
        </ion-row>
      </ion-grid>

      <ion-item>
        <ion-label [class]="autoAr ? 'normal' : 'dis'">Automático</ion-label>
        <ion-toggle [(ngModel)]="autoAr" (ionChange)="resetTemp()"></ion-toggle>
      </ion-item>
      <ion-item *ngIf="!autoAr">
        <ion-label>Liga/ Desliga</ion-label>
        <ion-toggle [(ngModel)]="onOffAr"></ion-toggle>
      </ion-item>
      <ion-item *ngIf="(onOffAr && !autoAr)">
        <ion-range min="18" max="30" step="1" snaps="true" [(ngModel)]="temp" color="danger">
          <ion-icon range-left small color="danger" name="thermometer"></ion-icon>
          <ion-icon range-right color="danger" name="thermometer"></ion-icon>
        </ion-range>
      </ion-item>
    </ion-list>
    <button ion-button color="danger" (click)="localizar()">localizacao</button>
    <button ion-button color="secondary" (click)="salvarInstancia()">Salvar Localização</button>
    <p>{{geoService.lat}}</p>
    <p>{{geoService.lng}}</p>
  </div>
</ion-content>